/**
 * Minified by jsDelivr using Terser v5.19.2.
 * Original file: /npm/hyperscript.org@0.9.12/dist/socket.js
 *
 * Do NOT use SRI with dynamically generated files! More information: https://www.jsdelivr.com/using-sri-with-dynamic-files
 */
!function(e,t){const n=(e=>{function t(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(e){var t=16*Math.random()|0;return("x"==e?t:3&t|8).toString(16)}))}function n(e){var t=e;if(0===t.indexOf("/")){var n=window.location.hostname+(window.location.port?":"+window.location.port:"");"https:"===window.location.protocol?t="wss://"+n+t:"http:"===window.location.protocol&&(t="ws://"+n+t)}return t}function r(e){var t=n(e.evaluate());return new WebSocket(t)}return e=>{var n=["then","catch","length","asyncWrapper","toJSON"];e.addFeature("socket",(function(e,o,i){function a(e){return new Proxy({},{get:function(o,i){return n.indexOf(i)>=0?null:"noTimeout"===i?a(-1):"timeout"===i?function(e){return a(parseInt(e))}:function(){for(var n=t(),o=[],a=0;a<arguments.length;a++)o.push(arguments[a]);var s={iid:n,function:i,args:o};(v=v||r(x)).send(JSON.stringify(s));var c=new Promise((function(e,t){u[n]={resolve:e,reject:t}}));return e>=0&&setTimeout((function(){u[n]&&u[n].reject("Timed out"),delete u[n]}),e),c}}})}if(i.matchToken("socket")){var s=e.requireElement("dotOrColonPath",i).evaluate().split("."),c=s.pop(),u={},x=e.requireElement("stringLike",i),l=1e4;if(i.matchToken("with")&&(i.requireToken("timeout"),l=e.requireElement("expression",i).evaluate()),i.matchToken("on")){if(i.requireToken("message"),i.matchToken("as")){i.requireToken("json");var f=!0}for(var d=e.requireElement("commandList",i),p={type:"implicitReturn",op:function(e){return o.HALT},execute:function(e){}},m=d;m.next;)m=m.next;m.next=p}var v=r(x),h=a(l),w={raw:v,dispatchEvent:function(e){var t=e.detail;delete t.sender,delete t._namedArgList_,v.send(JSON.stringify(Object.assign({type:e.type},t)))},rpc:h},g={name:c,socket:w,install:function(e){o.assignToNamespace(e,s,c,w)}};return v.onmessage=function(e){var t=e.data;try{var n=JSON.parse(t)}catch(e){}if(n&&n.iid&&(n.throw?u[n.iid].reject(n.throw):u[n.iid].resolve(n.return),delete u[n.iid]),d){var r=o.makeContext(w,g,w);if(f){if(!n)throw"Received non-JSON message from socket: "+t;r.locals.message=n,r.result=n}else r.locals.message=t,r.result=t;d.execute(r)}},v.addEventListener("close",(function(e){v=null})),g}}))}})();"object"==typeof exports&&"string"!=typeof exports.nodeName?module.exports=n:"_hyperscript"in e&&e._hyperscript.use(n)}("undefined"!=typeof self?self:this);
//# sourceMappingURL=/sm/ffc2719e920584e6ef9b91a16d3f66eb287a068bf07e7d8de212772846e90787.map